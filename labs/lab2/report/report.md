---
## Front matter
title: "Лабораторная работа №2"
subtitle: "Дискреционное разграничение прав в Linux. Основные атрибуты"
author: "Парфенова Елизавета Евгеньевна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Получение практических навыков работы в консоли с атрибутами файлов, закрепление теоретических основ дискреционного разграничения доступа в современных системах с открытым кодом на базе ОС Linux.


# Теоретическое введение

Права доступа в операционной системе Linux представляют собой ключевой элемент безопасности, определяющий, какой доступ имеют пользователи и программы к файлам и каталогам. Чтобы посмотреть права пользователя в Linux, необходимо воспользоваться следующей командой [@prav:bash]:

*ls - l*

Изменить права доступа можно с помощью команды *chmod*. Основной синтаксис команды *chmod* выглядит следующим образом [@ch:bash]:

*chmod [опции] <права> <файлы>*

Есть 3 вида разрешений. Они определяют права пользователя на 3 действия: чтение, запись и выполнение. В Linux эти действия обозначаются вот так:

- r — read (чтение) — право просматривать содержимое файла;
- w — write (запись) — право изменять содержимое файла;
- x — execute (выполнение) — право запускать файл, если это программа или скрипт.

У каждого файла есть 3 группы пользователей, для которых можно устанавливать права доступа. 

- owner (владелец) — отдельный человек, который владеет файлом. Обычно это тот, кто создал файл, но владельцем можно сделать и кого-то другого.
- group (группа) — пользователи с общими заданными правами.
- others (другие) — все остальные пользователи, не относящиеся к группе и не являющиеся владельцами [@group:bash]. 

Существуют два основных способа записи прав доступа: символьный и числовой формат. Символьный формат использует читаемые буквы и символы для представления прав доступа, в то время как числовой формат использует числа в восьмеричной системе [@prav:bash].

В табл. [-@tbl:tbl1] приведено краткое описание стандартных каталогов Unix.

: Формат записи прав доступа системы GNU Linux {#tbl:tbl1}

| Права доступа | Символьный формат | Числовой формат |
|----------------------|-----------|--------|
|   Чтение   |   r   |    4    |   
|   Запись   |   w |    2    | 
|   Выполнение   |   x   |    1     |   
|   Нет доступа   |   -   |    0     |   


# Выполнение лабораторной работы

Заходим в виртуальную машину Rocky Linux и с помощью команды *useradd guest* создаем новую учетную запись пользователя guest. Для этого также командой "su" заходим в систему от имени администратора, введя пароль. (рис. [-@fig:001]).

![Создание новой учетной записи guest](image/1){#fig:001 width=70%}

Далее задаем пароль командой *passwd guest*. Он должен быть не менее 8 символов. (рис. [-@fig:002]).

![Задание пароля для новой учетной записи](image/2){#fig:002 width=70%}

Затем выходим из системы с помощью Log out и заходим в новую учетную запись, вводя пароль. В консоли определяем директорию, в которой находимся, командой *pwd*. (рис. [-@fig:003]) Видим, что эта директория является нашей домашней директорией. Также проверяем это с помощью команды *cd ~* (переход в домашню. директорию) и видим, что наше местоположение не меняется.

![Вывод команды pwd](image/3){#fig:003 width=70%}

Командой *whoami* уточняем имя пользователя. Видим, что оно guest, как мы и задавали. (рис. [-@fig:004])

![Вывод команды whoami](image/4){#fig:004 width=70%}

В выводе команды *id* видим, что имя нашего пользователя guest, его id = 1001 (uid), а также он входит в группу guest с таким же id (group). Далее введем команду *groups* и увидим наше имя пользователя - значит наш пользователь входит только в 1 группу, как и было указано выше.  (рис. [-@fig:005]). Также видим, что имя пользователя в выводе *id* совпадает с приглашением командной строки.

![Вывод команды id и groups](image/5){#fig:005 width=70%}

Командой *cat /etc/passwd* просмотрим файл /etc/passwd и найдем там свою учетную запись самой последней строкой. (рис. [-@fig:006]). Видим, что имя пользователя, а также uid и gid, равные 1001, совпадают с нашими прошлыми данными.  Проверим, правильно ли мы все нашли, с помощью команды *cat /etc/passwd | grep guest* (рис. [-@fig:007]). Все оказалось верно

![Содержимое файла /etc/passwd](image/6){#fig:006 width=70%}

![Вывод команды cat /etc/passwd | grep guest](image/7){#fig:007 width=70%}

Командой *ls -l /home/* определим все существующие в домашнем каталоге директории. Поддиректориями являеются guest и eeparfenova (рис. [-@fig:008]). Владелец директорий имеет право на чтение, запись и выполнение (изменение), остальные не могут ничего. 

![Директории домашнего каталога](image/8){#fig:008 width=70%}

Командой *lsattr /home* проверим расширенные атрибуты, установленные на поддиректориях /home. Видим, что на поддиректории guest не установлено никакхи расширенных атрибутов, а информацию об этом на директории другоих пользователей (eeparfenova) мы увидеть не можем (рис. [-@fig:009]).


![Расширенные атрибуты поддиректорий](image/9){#fig:009 width=70%}

Командой *mkdir dir1* создаем новую директорию dir1. Командами *ls -l и lssttr* видим, что  владелец имеет право на чтение, запись и изменения (то есть все права), а для остальных доступно только чтение и не доступно внесение изменений. А по выводу второй команды видим, что никаких расширенных атрибутов не установлено (рис. [-@fig:010]). 

![Информация о правах и расширенных атрибутах dir1](image/10){#fig:010 width=70%}


Командой  *chmod 000 dir1* снимаем все атрибуты с директории dir1 и проверяем, получилось ли это командой *ls -l* (рис. [-@fig:011]). Все прошло корреткно

![Снятие всех атрибутов с команды dir1](image/11){#fig:011 width=70%}


Командой *echo "test" > /home/guest/dir1/file1* создаем в директории dir1 файл file1, однако получаем отказ в операции, так как с директории dir1 сняты абсолютно все атрибуты и мы не имеем никаких прав в ней. Отказ в операции не создал файл внутри дирректории (так как и на это у нас нет парва), однако проверить это с помощью *ls -l /home/guest/dir1* мы также не можем, так как атрибут на просмотр дирректории также снят (у нас нет на это прав) (рис. [-@fig:012])

![Попытка создания файла](image/12){#fig:012 width=70%}


Далее заполним таблицу «Установленные права и разрешённые действия» оптыным путем. Получившаяся таблица [-@tbl:tbl2]


: Установленные права и разрешённые действия {#tbl:tbl2}



| Права директории | Права файла | Создание файла | Удаление файла | Запись в файл | Чтение файла | Смена директории | Просмотр файлов в директории | Переименование файла | Смена атрибутов файла |
|----------------------|-----------|--------|--------|--------|--------|--------|--------|--------|--------|
|   d(000)   |   (000)   |    -    |    -    |    -    |    -    |    -    |    -    |    -    |    -    |
|   d(100)   |   (000)   |    -    |    -    |    -    |    -    |    +    |    -    |    -    |    +    |
|   d(200)   |   (000)   |    -     |   -      |   -      |    -     |    -    |    -     |    -     |    -     |
|   d(300)   |   (000)   |     +    |     +    |   -      |    -     |    +     |     -    |    +     |    +     |
|   d(400)   |   (000)   |     -    |     -    |     -    |     -    |     -    |     +    |     -    |     -    |
|   d(500)   |   (000)   |    -     |    -     |     -    |    -     |     +    |     +    |    -     |    +     |
|   d(600)   |   (000)   |     -    |     -    |     -   |     -    |     -    |    +     |     -    |      -   |
|   d(700)   |   (000)   |     +    |    +     |      -   |      -   |     +    |     +    |     +    |     +    |
|   d(000)   |   (100)   |     -    |    -     |    -     |     -    |     -    |     -    |    -     |    -     |
|   d(100)   |   (100)   |     -    |    -     |      -   |     -    |    +     |      -   |    -     |     +    |
|   d(200)   |   (100)   |     -    |     -    |     -    |     -    |     -    |    -     |     -    |      -   |
|   d(300)   |   (100)   |    +     |    +     |     -    |     -    |    +     |    -     |     +    |    +     |
|   d(400)   |   (100)   |     -    |     -    |     -    |    -     |    -     |     +    |     -    |   -      |
|   d(500)   |   (100)   |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (100)   |     -    |     -    |       -  |      -   |    -     |    +    |     -    |      -   |
|   d(700)   |   (100)   |    +     |     +    |    -     |     -    |     +    |    +     |    +     |    +     |
|   d(000)   |   (200)   |    -     |     -    |     -    |     -    |    -     |    -     |    -     |     -    |
|   d(100)   |   (200)   |    -     |    -     |     +    |    -     |    +     |    -     |     -    |     +    |
|   d(200)   |   (200)   |     -    |      -   |      -   |    -     |      -   |    -     |    -     |    -     |
|   d(300)   |   (200)   |     +    |     +    |    +     |     -    |    +     |     -    |     +    |    +     |
|   d(400)   |   (200)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (200)   |    -     |    -     |    +     |    -     |    +     |     +    |   -      |    +     |
|   d(600)   |   (200)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (200)   |      +   |    +     |    +     |    -     |      +   |     +    |      +   |     +    |
|   d(000)   |   (300)   |     -    |     -    |     -    |      -   |   -      |    -     |      -   |   -      |
|   d(100)   |   (300)   |     -    |      -   |    -     |       -  |   +      |    -     |    -     |     +    |
|   d(200)   |   (300)   |    -     |     -    |        - |    -     |     -    |    -     |     -    |   -      |
|   d(300)   |   (300)   |     +    |    +     |    +     |   -      |    +     |    -     |    +     |    +     |
|   d(400)   |   (300)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (300)   |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (300)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (300)   |     +    |    +     |    +     |   -      |    +     |    +     |    +     |    +     |
|   d(000)   |   (400)   |    -     |     -    |     -    |     -    |    -     |    -     |    -     |     -    |
|   d(100)   |   (400)   |    -    |    -    |    -    |    +    |    +    |    -    |    -    |    +    |
|   d(200)   |   (400)   |    -     |     -    |        - |    -     |     -    |    -     |     -    |   -      |
|   d(300)   |   (400)   |      +   |     +    |     -    |    +     |    +     |     -    |     +    |    +     |
|   d(400)   |   (400)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (400)    |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (400)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (400)   |      +   |     +    |     -    |    +     |    +     |     +    |     +    |    +     |
|   d(000)   |   (500)   |    -     |     -    |     -    |     -    |    -     |    -     |    -     |     -    |
|   d(100)   |   (500)   |    -    |    -    |    -    |    -    |    +    |    -    |    -    |    +    |
|   d(200)   |   (500)   |    -     |     -    |        - |    -     |     -    |    -     |     -    |   -      |
|   d(300)   |   (500)   |    +     |     +    |     -    |     +    |     +    |      -   |      +   |    +     |
|   d(400)   |   (500)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (500)   |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (500)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (500)   |    +     |     +    |     -    |     +    |     +    |      +   |      +   |    +     |
|   d(000)   |   (600)   |    -     |     -    |     -    |     -    |    -     |    -     |    -     |     -    |
|   d(100)   |   (600)   |    -    |    -    |    -    |    -    |    +    |    -    |    -    |    +    |
|   d(200)   |   (600)   |    -     |     -    |        - |    -     |     -    |    -     |     -    |   -      |
|   d(300)   |   (600)   |    +     |     +    |     +    |     +    |     +    |      -   |      +   |    +     |
|   d(400)   |   (600)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (600)   |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (600)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (600)   |    +     |     +    |     +    |     +    |     +    |      +   |      +   |    +     |
|   d(000)   |   (700)   |    -     |     -    |     -    |     -    |    -     |    -     |    -     |     -    |
|   d(100)   |   (700)   |    -    |    -    |    -    |    -    |    +    |    -    |    -    |    +    |
|   d(200)   |   (700)   |    -     |     -    |        - |    -     |     -    |    -     |     -    |   -      |
|   d(300)   |   (700)   |     +    |    +     |    +     |     +    |     +    |     -    |     +    |     +    |
|   d(400)   |   (700)   |   -     |     -    |     -    |    -     |   -      |    +     |     -    |    -     |
|   d(500)   |   (700)    |    -     |     -    |     -    |    -     |     +    |      +   |      -   |      +   |
|   d(600)   |   (700)   |    -     |    -     |     -    |     -    |    -     |     +    |     -    |   -      |
|   d(700)   |   (700)   |     +   |    +    |    +    |    +    |    +    |    +    |    +    |    +    |

На основе анализа уже заполненной таблицы заполним следующую таблицу, которая указывает на миниммальные права для файла и директории для того или иного действия. Получившаяся таблица [-@tbl:tbl3]

: Минимальные права для совершения операций {#tbl:tbl3}


| Операция | Минимальные права на директорию | Минимальные права на файл |
|----------|---------------------------------|---------------------------|
|Создание файла|            d(300)                 |             (000)              |
|Удаление файла|            d(300)                 |            (000)               |
|Чтение файла|            d(100)                   |            (400)               |
|Запись в файл|              d(100)                |               (200)            |
|Переименование файла |        d(300)               |              (000)             | 
|Создание поддиректории |          d(300)           |              (000)             |
|Удаление поддиректории |          d(300)            |               (000)            |


# Выводы

Мы получили практические навыки работы в консоли с атрибутами файлов, закрепили теоретические основы дискреционного разграничения доступа в современных системах с открытым кодом на базе ОС Linux.

# Список литературы{.unnumbered}

::: {#refs}
:::
